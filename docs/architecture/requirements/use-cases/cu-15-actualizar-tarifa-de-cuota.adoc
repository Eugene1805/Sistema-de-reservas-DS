==== CU-15 Actualizar tarifa de cuota

|===
| ID | CU-15
| Nombre | Actualizar tarifa de cuota
| Autor | Erickmel Vázquez López
| Fecha de actualización | 03 de octubre de 2025
| Descripción | El administrador actualiza la información de una tarifa de cuota existente, modificando su monto, periodicidad o fechas de vigencia.
| Actor(es) | Administrador
| Disparador | Administrador da clic en la opción "Modificar tarifa de cuota".
| Precondiciones | PRE-01.- El administrador debe estar autenticado en el sistema. +
PRE-02.- Debe existir al menos una tarifa de cuota registrada en el sistema. +
PRE-03.- El administrador debe tener permisos para modificar tarifas. +
PRE-04.- No debe haber cuotas activas o cargos recurrentes afectados por la modificación.
| Flujo normal |
1.- El sistema muestra la ventana "Tarifas" con el listado de tarifas existentes clasificadas por tipo. +
2.- El sistema muestra los botones "Nueva tarifa", "Modificar", "Eliminar" y "Salir". +
3.- El administrador selecciona el tipo de tarifa "Tarifa de cuota" en el combobox correspondiente. +
4.- El sistema filtra y muestra las tarifas de cuota existentes. +
5.- El administrador selecciona la tarifa de cuota que desea modificar de la lista. (FA-01) (EX-01) +
6.- El administrador da clic en el botón "Modificar". +
7.- El sistema abre la ventana "Modificar tarifa de cuota" mostrando los datos actuales. +
8.- El sistema permite editar los campos: descripción, monto, periodicidad, fecha de inicio y fin de vigencia. +
9.- El administrador actualiza los datos deseados. (EX-02) +
10.- El sistema muestra los botones "Guardar cambios" y "Cancelar". +
11.- El administrador da clic en "Guardar cambios". (FA-02) +
12.- El sistema valida que los datos sean consistentes y que no existan conflictos con cuotas activas. (EX-03) +
13.- El sistema actualiza la información de la tarifa en la base de datos. +
14.- El sistema muestra el mensaje "La tarifa de cuota se ha actualizado exitosamente". +
15.- El sistema muestra el botón "Aceptar". +
16.- El administrador da clic en "Aceptar". +
17.- El sistema regresa a la ventana principal de "Tarifas". +
18.- Termina el Caso de Uso.
| Flujos alternos |
FA-01. El administrador da clic en "Salir". +
    1.- El administrador da clic en el botón "Salir". +
    2.- El sistema regresa al usuario a la ventana principal del sistema. +
    3.- Termina Caso de Uso. +
FA-02. El administrador da clic en "Cancelar". +
    1.- El administrador da clic en el botón "Cancelar". +
    2.- El sistema regresa al usuario a la ventana "Tarifas". +
    3.- Termina Caso de Uso.
| Excepciones |
EX-01. No se ha seleccionado ninguna tarifa de cuota. +
    1.- El sistema muestra el mensaje "Debe seleccionar una tarifa de cuota para modificar". +
    2.- El sistema muestra el botón "Aceptar". +
    3.- El administrador da clic en "Aceptar". +
    4.- El sistema regresa a la ventana "Tarifas". +
EX-02. Datos inválidos. +
    1.- El sistema detecta datos incorrectos (monto negativo, fechas inconsistentes o periodicidad vacía). +
    2.- El sistema muestra el mensaje "Datos inválidos. Por favor, corríjalos e intente nuevamente". +
    3.- El sistema muestra el botón "Aceptar". +
    4.- El administrador da clic en "Aceptar". +
    5.- El sistema regresa a la ventana de modificación. +
EX-03. Cuotas activas afectadas por la tarifa. +
    1.- El sistema detecta que existen cuotas o cargos recurrentes activos vinculados a la tarifa. +
    2.- El sistema muestra el mensaje "No se puede modificar esta tarifa porque afecta cuotas activas". +
    3.- El sistema muestra el botón "Aceptar". +
    4.- El administrador da clic en "Aceptar". +
    5.- El sistema regresa a la ventana de modificación sin guardar cambios. +
EX-04. No hay conexión con la base de datos. +
    1.- El sistema muestra el mensaje "No hay conexión con la base de datos, inténtelo más tarde." +
    2.- El sistema muestra el botón "Aceptar". +
    3.- El administrador da clic en "Aceptar". +
    4.- El sistema regresa al usuario a la ventana "Tarifas". +
| Postcondiciones |
POST-01.- La tarifa de cuota seleccionada se actualiza correctamente en la base de datos. +
POST-02.- Las modificaciones se aplican a futuras cuotas o cargos recurrentes. +
POST-03.- Las cuotas ya generadas antes de la actualización mantienen el valor previo. +
| Reglas de negocio |
RN-01.- Solo los administradores pueden modificar tarifas de cuota. +
RN-02.- No se puede modificar una tarifa de cuota si existen cuotas activas asociadas. +
RN-03.- El monto de la cuota debe ser un valor positivo. +
RN-04.- Toda tarifa de cuota debe tener definida una periodicidad (mensual, trimestral, anual, etc.). +
RN-05.- La fecha de inicio debe ser anterior a la fecha de fin de vigencia. +
|===
