==== CU-14 Actualizar tarifa

|===
| ID | CU-14
| Nombre | Actualizar tarifa
| Autor | Erickmel Vázquez López
| Fecha de actualización | 03 de octubre de 2025
| Descripción | El administrador actualiza la información de una tarifa existente, modificando precios, fechas de vigencia o tipo de habitación/servicio asociado.
| Actor(es) | Administrador
| Disparador | Administrador da clic en la opción "Modificar tarifa".
| Precondiciones | PRE-01.- El administrador debe estar autenticado en el sistema. +
PRE-02.- Debe existir al menos una tarifa registrada en el sistema. +
PRE-03.- El administrador debe tener permisos para modificar tarifas. +
PRE-04.- No debe haber reservaciones activas afectadas por la modificación de la tarifa.
| Flujo normal |
1.- El sistema muestra la ventana "Tarifas" con el listado de tarifas existentes. +
2.- El sistema muestra los botones "Nueva tarifa", "Modificar", "Eliminar" y "Salir". +
3.- El administrador selecciona la tarifa que desea modificar de la lista. (FA-01) (EX-01) +
4.- El administrador da clic en el botón "Modificar". +
5.- El sistema abre la ventana "Modificar tarifa" mostrando los campos actuales de la tarifa seleccionada. +
6.- El sistema muestra un combobox con los tipos de tarifa existentes. +
7.- El administrador selecciona "Tarifa de habitaciones". +
8.- El sistema permite editar los campos: tipo de habitación/servicio, precio base, fechas de inicio y fin de vigencia y reglas opcionales de ocupación. +
9.- El administrador actualiza los datos deseados. (EX-02) +
10.- El sistema muestra los botones "Guardar cambios" y "Cancelar". +
11.- El administrador da clic en "Guardar cambios". (FA-02) +
12.- El sistema valida que los datos sean consistentes y que no existan conflictos con reservaciones activas. (EX-03) +
13.- El sistema actualiza la información de la tarifa en la base de datos. +
14.- El sistema muestra el mensaje "La tarifa se ha actualizado exitosamente". +
15.- El sistema muestra el botón "Aceptar". +
16.- El administrador da clic en "Aceptar". +
17.- El sistema regresa a la ventana principal de "Tarifas". +
18.- Termina el Caso de Uso.
| Flujos alternos |
FA-01. El administrador da clic en "Salir". +
    1.- El administrador da clic en el botón "Salir". +
    2.- El sistema regresa al usuario a la ventana principal del sistema. +
    3.- Termina Caso de Uso. +
FA-02. El administrador da clic en "Cancelar". +
    1.- El administrador da clic en el botón "Cancelar". +
    2.- El sistema regresa al usuario a la ventana "Tarifas". +
    3.- Termina Caso de Uso.
| Excepciones |
EX-01. No se ha seleccionado ninguna tarifa. +
    1.- El sistema muestra el mensaje "Debe seleccionar una tarifa para modificar". +
    2.- El sistema muestra el botón "Aceptar". +
    3.- El administrador da clic en "Aceptar". +
    4.- El sistema regresa a la ventana "Tarifas". +
EX-02. Datos inválidos. +
    1.- El sistema detecta datos incorrectos (precio negativo, fechas inválidas o campos vacíos). +
    2.- El sistema muestra el mensaje "Datos inválidos. Por favor, corríjalos e intente nuevamente". +
    3.- El sistema muestra el botón "Aceptar". +
    4.- El administrador da clic en "Aceptar". +
    5.- El sistema regresa a la ventana de modificación. +
EX-03. Reservaciones activas afectadas por la tarifa. +
    1.- El sistema detecta que hay reservaciones vigentes asociadas a la tarifa que se intenta modificar. +
    2.- El sistema muestra el mensaje "No se puede modificar esta tarifa porque afecta reservaciones activas". +
    3.- El sistema muestra el botón "Aceptar". +
    4.- El administrador da clic en "Aceptar". +
    5.- El sistema regresa a la ventana de modificación sin guardar cambios. +
EX-04. No hay conexión con la base de datos. +
    1.- El sistema muestra el mensaje "No hay conexión con la base de datos, inténtelo más tarde." +
    2.- El sistema muestra el botón "Aceptar". +
    3.- El administrador da clic en "Aceptar". +
    4.- El sistema regresa al usuario a la ventana "Tarifas". +
| Postcondiciones |
POST-01.- La tarifa seleccionada se actualiza correctamente en la base de datos. +
POST-02.- Las modificaciones se reflejan en las operaciones futuras de reservación y cálculo de precios. +
POST-03.- Las reservaciones previas mantienen las condiciones originales de la tarifa con la que fueron generadas.
| Reglas de negocio |
RN-01.- Solo los administradores pueden modificar tarifas. +
RN-02.- Las tarifas no pueden modificarse si existen reservaciones activas asociadas. +
RN-03.- Toda tarifa modificada debe mantener un rango de fechas de vigencia coherente. +
RN-04.- Los precios deben ser valores positivos y expresados en la moneda configurada en el sistema. +
|===
